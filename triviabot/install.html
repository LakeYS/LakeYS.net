<!DOCTYPE html><html lang="en-US">
  <head>
    <title>TriviaBot - Manual Hosting Guide</title>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-92656775-1', 'auto');
    ga('send', 'pageview');

  	</script>
    <link href="main.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Varela+Round&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="profile_t.png">

    <meta charset="UTF-8">
    <meta name="author" content="Lake Y">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>

  <body>
    <div id="block">
      <h1 id="blockHeader">
        <a id="blockHeaderLogo" href="./"><img id="blockHeaderLogoImg" src="profile_t.png"> TriviaBot</a>
        <a class="blockHeaderOption" href="./install.html">Manual Install Guide</a>
        <a class="blockHeaderOption" href="./contribute/">Contribute Questions</a>
        <a class="blockHeaderOption" href="https://www.patreon.com/LakeYS">Support it on Patreon</a>

        <div class="blockHeaderOption blockHeaderPartner">
          In partnership with:
          <a class="partnerBtn" href=https://discords.com/ target=_none>discords.com</a>
        </div>

        <a id="inviteButton" class="blockHeaderOption" href="http://lakeys.net/triviabot/invite" target="_none"><span style="font-size: 34px; margin-right: 6px;">+</span> Invite</a>
      </h1>

      <div id="blockContent">
          <p>TriviaBot is open-source and can be downloaded for free. This guide shows you how to install TriviaBot on a Windows or Linux system. <b>Note that installing TriviaBot using this method is completely optional for most cases. For general use, you can simply <a href="http://lakeys.net/triviabot/invite">invite TriviaBot to your server</a> directly.</b></p>
          <p>If you enjoy using TriviaBot as a free and open source application, please consider <a href="https://www.patreon.com/LakeYS">supporting it on patreon.</a></p>

          <p><a class="github-button" href="https://github.com/LakeYS/Discord-Trivia-Bot" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star LakeYS/Discord-Trivia-Bot on GitHub">Star</a></p>

          <a id="downloadLink" class="linkBtn" href="https://lakeys.net/triviabot/dl/TriviaBot.zip">Download TriviaBot for Windows</a>
          <a id="downloadLink" class="linkBtn" href="https://lakeys.net/triviabot/dl/triviabot.tar.gz">Download TriviaBot for Linux</a>

          <img src="./console.png" id="imgPreview1">

          <h1>Table of Contents</h1>
          <a href="#windows">1. How to Install - Windows</a><br>
          <a class="tocsub" href="#windowsAcc">1.1: Creating the bot account</a><br>
          <a class="tocsub" href="#windowsSetup">1.2: Setting up the bot</a><br>
          <a class="tocsub" href="#windowsRun">1.3: Run the bot!</a><br>
          <a href="#linux">2. How to Install - Linux<br>
          <a class="tocsub" href="#linuxPi">2.0.1: Raspberry Pi/Raspbian OS</a><br>
          <a class="tocsub" href="#linuxAcc">2.1: Creating the bot account</a><br>
          <a class="tocsub" href="#linuxSetup">2.2: Setting up the bot</a><br>
          <a class="tocsub" href="#linuxRun">2.3: Run the bot!</a><br>
          <a href="#use">3. Usage Instructions<br>
          <a class="tocsub" href="#useConfig">3.1: Configuration</a><br>
          <a class="tocsub" href="#useConfigA">3.1.1: Game Configuration</a><br>
          <a class="tocsub" href="#useConfigB">3.1.2: Global Configuration</a><br>
          <a class="tocsub" href="#useConfigC">3.1.3: Maintenance Configuration</a><br>
          <a class="tocsub" href="#commandConfig">3.1.4: Changing Configuration Using Commands</a><br>
          <a href="#customQuestions">4. How to Set Up Custom Questions</a><br>
          <a href="#customQuestionsLimits">4.1. Custom Question Limitations</h2><br>
          <a href="#customQuestionsOptionals">4.2. Optional Configurations for Custom Questions</h2><br>
          <a class="tocsub" href="#optionalAnswerExtension">4.2.1: How to Add Additional Answer Info (Answer Extensions)</a><br>
          <a class="tocsub" href="#optionalImages">4.2.2: How to Add Images to Questions and Answers</a><br>
          <a href="#linuxService">5. How to Set Up TriviaBot as a Service on Linux</a>

          <h1 id="windows">How to Install - Windows</h1>
          <img src="./install/ss_devpanel.png" id="imgInfo">
          <h2 id="windowsAcc">Creating the bot account</h2> <!-- These instructions are repeated below -->
          <ol>
            <li>Log in to the <a href="https://discord.com/developers/applications" target="_none">Discord Developer Portal</a> and click "New application". Name the bot anything you like and click Create. Copy or write down the application ID as you will need it for later.
              
            </li>
            <li>On the left hand side, click "Bot". Now click the "Add Bot" button to create your bot. Here you can set an avatar for your bot if desired.
              
              
            </li>
            <li>Under "Token" click the link that says "click to reveal". This is the password for your bot's account. You'll need this and the Client ID number later. Copy them both somewhere safe or keep the tab open.</li>
            <li>Paste the URL listed below into your browser and replace "CLIENT_ID" with your application ID number from earlier. Hit enter and select the desired Discord server. Once this is done, the bot will show up in your server!</li>
          </ol>
          <em>https://discord.com/oauth2/authorize?client_id=CLIENT_ID&scope=bot%20applications.commands</em>

          <h2 id="windowsSetup">Setting up the bot</h2>
          <ol>
            <li><a href="http://lakeys.net/triviabot/dl/TriviaBot.zip">Download</a> the TriviaBot program and extract it somewhere on your system.</li>
            <li>Install Node.js (<b>Current</b>, not LTS) from <a href="https://nodejs.org/en/download/current/">this website</a>.</li>
            <li>Once Node.js is finished installing, run install.bat in the bot's folder. This will automatically install the required modules for the bot.</li>
            <li>Right click the config.example.json file, click "rename", and rename this file to <em>config.json</em>.</li>
            <li>Right click your new config.json file and click "Edit", or open the file in your preferred text editor.</li>
            <li>Find "your_token_here" and replace it with the Discord token from earlier.</li>
          </ol>

          <h2 id="windowsRun">Run the bot!</h2>
          <p>Once you complete all of this, you will be able to run the bot by opening run.bat. If you've done all of this correctly, you will see the following in the terminal:
          <em>TriviaBot connected to 1 Discord Server.</em></p>

          <p>Note that if you close this terminal the bot will be disconnected. In Windows, the bot can be run in the background with no terminal by opening run_silent.vbs.</p>

          <p>You may want to create a shortcut to run.bat or run_silent.vbs in your Startup folder:</p>

          <p><em>C:\Users\[YOURNAME]\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</em></p>

          <h1 id="linux">How to Install - Linux</h1>
          <h2 id="linuxPi">Raspberry Pi/Raspbian OS</h2>
          <p>TriviaBot can be run from a Raspberry Pi device by installing Node.js.</p>
          <p>First, follow the <a href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions" target="_none">Node.js install instructions found here</a> under "Debian and Ubuntu based Linux distributions". Once this is done, you can proceed with the instructions below. You may need access to a desktop computer in order to create the bot account.</p>

          <h2 id="linuxAcc">Creating the bot account</h2>  <!-- These instructions are repeated above -->
          <ol>
            <li>Log in to the <a href="https://discord.com/developers/applications" target="_none">Discord Developer Portal</a> and click "New application". Name the bot anything you like and click Create. Copy or write down the application ID as you will need it for later.</li>
            <li>On the left hand side, click "Bot". Now click the "Add Bot" button to create your bot. Here you can set an avatar for your bot if desired.</li>
            <li>Under "Token" click the link that says "click to reveal". This is the password for your bot's account. You'll need this and the Client ID number later. Copy them both somewhere safe or keep the tab open.</li>
            <li>Paste the URL listed below into your browser and replace "CLIENT_ID" with your application ID number from earlier. Hit enter and select the desired Discord server. Once this is done, the bot will show up in your server!</li>
          </ol>
          <em>https://discord.com/oauth2/authorize?client_id=CLIENT_ID&scope=bot%20applications.commands</em>


          <h2 id="linuxSetup">Setting up the bot</h2>
          <ol>
            <li>Open a terminal on your system.</li>
            <li><b>(Skip this step if installing to a Raspberry Pi device.)</b> Install the current version of Node.js and NPM (16.6 is required at minimum). Install build tools if instructed. <a href="https://nodejs.org/en/download/package-manager/">How to install via package manager</a>.</li>
            <li>Type <em>curl -L http://lakeys.net/triviabot/dl/triviabot.tar.gz > triviabot.tar.gz</em> to download the bot's files to an archive named <em>triviabot.tar.gz</em>.</li>
            <li>Type <em>tar -xzf triviabot.tar.gz</em> to extract the archive. This will create a directory named "TriviaBot". Navigate to the directory with <em>cd TriviaBot</em>.</li>
            <li>Type <em>sudo chmod +x run.sh</em>. This gives you permission to execute run.sh. (If this does not work, try <em>chmod +x run.sh</em>)</li>
            <li>Type <em>npm install</em> to install the required packages for the bot to run.</li>
            <li>Rename the <em>config.example.json</em> file to <em>config.json</em>.</li>
            <li>Open config.json in a text editor.</li>
            <li>Replace "your_token_here" with the Discord bot token from earlier.</li>
          </ol>

          <h2 id="linuxRun">Run the bot!</h2>
          <p>Once you complete all of this, you will be able to run the bot by executing run.sh (Navigate to the bot's directory and enter ./run.sh). If you've done all of this correctly, you will see the following:
          <em>TriviaBot connected to 1 Discord Server.</em></p>

          <h1 id="use">Usage Instructions</h1>
          <h2 id="useConfig">Configuration</h2>
          <p>The bot can be configured by editing config.json. See below for documentation on the config options.</p>
          <h3 id="useConfigA">Game Configuration</h2>
          <ul>
            <li><b>disable-admin-commands</b> - Disables all commands that are only usable by administrators. (for example, the "trivia stop" command)</li>
            <li><b>use-reactions</b> - Enables reaction mode. In reaction mode, answers are given using reactions rather than typed responses. NOTE: Reaction mode games can also be started using the 'trivia play advanced' command.</li>
            <li><b>hangman-mode</b> - Enables hangman mode. In this mode, answers are given by typing them out rather than choosing from a list of choices. NOTE: Hangman games can also be started using the 'trivia play advanced' command.</li>
            <li><b>hangman-hints</b> - Enables hints in hangman mode.</li>
            <li><b>prefix</b> - The prefix that users must type before each command. For example, changing this to "!" means users will need to type "!help" for the help command.</li>
            <li><b>hide-difficulty</b> - When enabled, games will not show their difficulty color. The embed will be blue instead.</li>
            <li><b>auto-delete-msgs</b> - The bot will automatically delete all of its messages after 15 seconds. This option will not delete players' answers.</li>
            <li><b>auto-delete-msgs-timer</b> - Approximate time in milliseconds until the bot deletes its own messages.</li>
            <li><b>auto-delete-answers</b> - The bot will automatically delete players' typed answers. Does not apply to reaction mode. Beware: Not an effective way to hide answers entirely! Determined cheaters can still snoop the answers before they disappear.</li>
            <li><b>auto-delete-answers-timer</b> - Approximate time in milliseconds until the bot deletes answers when auto-delete-answers is enabled. 0 being as quickly as possible. Accuracy may vary by network.</li>
            <li><b>reveal-answers</b> - When disabled, the bot will not display the anwer at the end of the round -- only which players answered correctly.</li>
            <li><b>round-length</b> - How long each round lasts in milliseconds. Note that hangman games will add 10 extra seconds to this value.</li>
            <li><b>round-timeout</b> - The amount of time between rounds in milliseconds.</li>
            <li><b>round-end-warnings-disabled</b> - Disables the "game will end if nobody participates" warnings.</li>
            <li><b>rounds-end-after</b> - How many inactive rounds (where no answers are given) are allowed before a game automatically ends.</li>
            <li><b>disable-score-display-midround</b> - Prevents the bot from displaying users' scores between rounds.</li>
            <li><b>disable-score-display-final</b> - Prevents the bot from displaying users' scores at the end of a game.</li>
            <li><b>score-value</b> - How many points are awarded for each question, based on difficulty.</li>
            <li><b>unique-multiplier-max</b> - Allows for setting a bonus multiplier for questions. Bonuses are given based on how many other players get the question incorrect. Default is 0, which has no effect. Recommended value is 2 for balance.</li>
            <li><b>command-whitelist</b> - A whitelist of users that can use commands. Can be a user tag (i.e. "Lake#4898") or a user ID (i.e. "128263376659939328")
              <br>Example: <em>["Lake#4898", "LakeTest#9924", "Cake#7123"]</em></li>
            <li><b>use-fixed-rounds</b> - When enabled, games will run for a set number of rounds.</li>
            <li><b>rounds-fixed-number</b> - How many rounds the bot will run for when <em>use-fixed-rounds</em> is enabled.</li>
            <li><b>accept-first-answer-only</b> - When enabled, only the first answer each player enters will be accepted -- answer changes will be ignored.</li>
          </ul>

          <h3 id="useConfigB">Global Configuration</h2>
          <ul>
            <li><b>allow-eval</b> - When enabled, the console will accept commands and JavaScript code. This is disabled by default due to known issues with the bot starting up.</li>
            <li><b>debug-mode</b> - Debug mode for testing purposes. When enabled, the correct answer to each question will be marked.</li>
            <li><b>shard-count</b> - How many shards will be spawned. This is only necessary if the bot is in over 2,000 guilds. See the <a href="https://discord.com/developers/docs/topics/gateway#sharding" target=_none>Discord sharding documentation</a> for more information.</li>
            <li><b>disable-version-check</b> - When enabled, the application will not check for new versions on startup. It is strongly recommended that this stays enabled unless there is a severe problem with the version check.</li>
            <li><b>allow-bots</b> - Whether other bots are allowed to provide answers. Please be mindful and avoid spamming the Open Trivia Database with unnecessary requests.</li>
            <li><b>databaseURL</b> - The database URL you want to use. See <a href=#customQuestions>Setting Up Custom Questions</a> for more info. If using the http or https protocol, the server behind it must be functionally identical to the Open Trivia Database API.</li>
            <li><b>database-merge</b> - For use with file-based custom trivia databases. Allows the use of custom trivia questions along with OpenTDB questions. See <a href=#customQuestions>Setting Up Custom Questions</a> for more info.</li>
            <li><b>database-cache-size</b> - How many questions the bot will cache on startup. Max: 50</li>
            <li><b>database-allow-long-answers</b> - Allows answers to be longer than 80 characters without an error on startup. Due to Discord's limit of 80 characters, buttons may not display correctly if this is enabled.</li>
            <li><b>stat-file</b> - Which file to store statistics in.</li>
            <li><b>embed-color</b> - The default color that the bot's embeds will use.</li>
            <li><b>channel-whitelist</b> - If any channels are specified, the bot will only work in those channels. Can specify either a channel name or an ID. Example: <em>"channel-whitelist": [ "trivia-dev", "trivia-dev2", "261705677943209984" ]</em></li>
          </ul>

          <h3 id="useConfigC">Maintenance Configuration</h2>
          A lot of the options in this section are deprecated and/or unused. Here are the ones that are still in use:
          <ul>
            <li><b>fallback-mode</b> - When enabled, the bot will start in "fallback mode". The bot will not send any messages in fallback mode. Message IDs are displayed in the console.</li>
            <li><b>fallback-silent</b> - Disables the message ID display while in fallback mode.</li>
            <li><b>fallback-exceptions</b> - Channels where the bot will still send messages while in fallback mode.</li>
          </ul>

          <h3 id="commandConfig">Changing Configuration Using Commands</h3>
          <p>Setting the <b>config-commands-enabled</b> option to true enables the admin "trivia config" and "trivia reset" admin commands.</p>
          <p><em>trivia config &lt;option&gt; &lt;value&gt; &lt;channel (optional)&gt;</em></p>
          <p>The "trivia config" command can be used to change values in config. Values can be surrounded with quotes when necessary, for example to reset the prefix to "trivia " (<em>trivia config prefix "trivia "</em>). Options can be removed by typing "trivia config null".</p>
          <p>Beware that this will change line spacing of the config file; it is recommended that you create a backup.</p>
          <p>The "trivia reset" command restarts the bot to apply config changes. All options currently require a restart before they take effect.</p>
          <p>Specifying a channel will cause the config to only take effect in that channel. Channel-based options are stored in Options/{channelid}_config.json in the bot's folder.</p>

          <h1 id="customQuestions">Setting Up Custom Questions</h1>
          One of the perks of self-hosting TriviaBot is that you can add your own questions! Here's how:
          <ol>
            <li>Open your config.json and look for "databaseURL". Replace <em>https://opentdb.com</em> with <em>file://./Questions</em>. You can use a different file path if desired.</li>
            <li>Enter the questions folder. Inside, you'll find a sample database. The sample database shows you how to format your questions and categories.</li>
            <li>In order to use these files, you will need to rename them to remove <em>.example.</em>. Rename <em>categories.example.yml</em> to <em>categories.yml</em>, <em>questions_0.example.yml</em> to <em>questions_0.yml</em>, etc.</li>
            <li>Open the categories.yml file in a text editor. Here, you can add, delete, and edit categories as needed. When creating a new category, make sure you have a matching file for it, named <em>questions_<b>ID</b>.yml</em>.</li>
            <li>Now edit the question files for your new categories. The included files, named "questions_0.yml", "questions_1.yml", and "questions_2.yml" all contain sample questions.</li>
            <li>Replace the example quetions as needed and, following the same format, add your own.</li>
            <li>If you want to have the questions from the Open Trivia Database along with your custom questions, enter the bot's config.json file and change "database-merge" to true.</li>
            <li>Now start the bot and test your questions! Typing "trivia help" and "trivia categories" will show you how many questions you have added.</li>
          </ol>

          <h2 id="customQuestionsLimits">Custom Question Limitations</h2>
          Custom questions have a few restrictions:
          <ul>
            <li>Answers should not be longer than 80 characters unless you are using them for hangman mode. Answers greater than 80 characters will cause an error unless hangman mode is on, or you set <em>allow-long-answers</em> to true in config.</li>
            <li>Each answer must have three "incorrect answers" specified -- even if you only intend to use them for hangman mode. This requirement will be removed for hangman setup in a future update.</li>
          </ul>

          <h2 id="customQuestionsOptionals">Optional Configurations for Custom Questions</h2>
          <h3 id="optionalAnswerExtension">How to Add Additional Answer Info (Answer Extensions)</h3>
          <p>You can add an additional comment or clarification to your custom questions by adding the <em>answer_extension</em> field to your question. Any text you enter in this field will display with the answer at the end of round.</p>
          <p>Your answer extensions can include links.</p>
          <p>Example formatting for answer extensions:</p>
          <div class="block">
            # Category 0 - Science
            ---
            questions:
            - question: "Compared to Earth, what is the approximate force of gravity on the moon?"
            &nbsp;&nbsp;difficulty: "medium"
            &nbsp;&nbsp;correct_answer: "One sixth"
            &nbsp;&nbsp;incorrect_answers:
            &nbsp;&nbsp;- "One half"
            &nbsp;&nbsp;- "One eighth"
            &nbsp;&nbsp;- "The same"
            &nbsp;&nbsp;answer_extension: "The force of gravity on the moon is 1.62 m/s². compared to Earth's 9.807 m/s²."
            - question: "Buzz Aldrin was the first man to step on the moon."
            &nbsp;&nbsp;difficulty: "medium"
            &nbsp;&nbsp;correct_answer: "False"
            &nbsp;&nbsp;incorrect_answers:
            &nbsp;&nbsp;- "True"
            &nbsp;&nbsp;answer_extension: "Neil Armstrong became the first human to step on the moon on July 20, 1969."
          </div>

          <h3 id="optionalImages">How to Add Images to Questions and Answers</h3>
          <p>You can specify an image to display on either the question, answer, or both, using the corresponding fields: <em>question_image</em> and <em>answer_image</em></p>
          <p>Each image must be posted with a link. If an invalid link is specified, your image will not appear.</p>
          <p>Example formatting for images:</p>
          <div class="block">
            # Category 0 - Science
            ---
            questions:
            - question: "Compared to Earth, what is the approximate force of gravity on the moon?"
            &nbsp;&nbsp;difficulty: "medium"
            &nbsp;&nbsp;correct_answer: "One sixth"
            &nbsp;&nbsp;incorrect_answers:
            &nbsp;&nbsp;- "One half"
            &nbsp;&nbsp;- "One eighth"
            &nbsp;&nbsp;- "The same"
            &nbsp;&nbsp;question_image: "https://lakeys.net/triviabot/sample_images/moon.jpg"
            &nbsp;&nbsp;answer_image: "https://lakeys.net/triviabot/sample_images/aldrin-descending-lm.jpg"
            - question: "Buzz Aldrin was the first man to step on the moon."
            &nbsp;&nbsp;difficulty: "medium"
            &nbsp;&nbsp;correct_answer: "False"
            &nbsp;&nbsp;incorrect_answers:
            &nbsp;&nbsp;- "True"
            &nbsp;&nbsp;question_image: "https://lakeys.net/triviabot/sample_images/buzz-aldrin-and-the-us-flag-on-the-moon.jpg"
            &nbsp;&nbsp;answer_image: "https://lakeys.net/triviabot/sample_images/armstrong-on-moon.jpg"
          </div>

          <h1 id="linuxService">How to Set Up TriviaBot as a Service on Linux</h1>
          <p>Once you have the bot set up on linux, you may find it more convenient to run the bot as a service.</p>
          <p>Before starting, make sure the bot is not already running.</p>
          <ol>
            <li>Create and open the file <em>/etc/systemd/system/triviabot.service</em>. Make sure to open it with sudo/admin permissions or the file will not be writable.</li>
            <li>Fill it with the following text, and replace the items in {brackets} with the relevant information below:
              <div class="block">
                [Service]
                ExecStart=/usr/bin/npm start
                WorkingDirectory=<i>{File Path}</i>
                Restart=always
                StandardOutput=syslog
                StandardError=syslog
                SyslogIdentifier=triviabot
                User=<i>{Username}</i>
                
                [Install]
                WantedBy=multi-user.target
                
              </div>
              <br>
              <ul>
                <li>{File Path} - The path to the directory that the bot is in. Example: `/home/{Username}/TriviaBot`</li>
                <li>{Username} The name of the user the bot will run on. WARNING: To ensure security of your system, it is strongly recommended that you DO NOT use root.</li>
              </ul>
              <br>
            </li>
            <li>Save the file and use the command <em>systemctl enable triviabot</em>, then <em>systemctl start triviabot</em>. This will start the bot.</li>
            <li>Wait a few seconds, then type <em>systemctl status triviabot</em> to see if the bot started successfully. If an error displays, double-check to make sure that both the bot and the triviabot.service file are configured correctly. Be sure to type <em>systemctl daemon-reload</em> after making any corrections to triviabot.service.</li>
          </ol>
          <p>You can now use the following commands to manage the bot: <em>sytstemctl stop triviabot</em>, <em>sytstemctl start triviabot</em>, <em>sytstemctl restart triviabot</em>, and <em>sytstemctl status triviabot</em>. Use sudo with these commands to avoid re-entering the password each time.</p>
          <br>
        </div>
      </div>
    </div>

    <footer>Site by Lake Y (<a href=http://lakeys.net target=_none>LakeYS.net</a>). For business inquiries: <a href=mailto:contact@lakeys.net>contact@lakeys.net</a>.
      <br>Special thanks to this month's sponsor: Gamer0364
      <br><a href="https://github.com/LakeYS" target=_none><img class="profileImg" src="../pf_git.png"></a>
      <br><a href="./tos.html">Terms of Service</a> | <a href="./privacy.html">Privacy Policy</a>
    </footer>
  </body>
</html>
